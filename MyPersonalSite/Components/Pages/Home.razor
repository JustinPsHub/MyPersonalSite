@page "/"
@rendermode InteractiveServer
@using Microsoft.AspNetCore.Components
@using System.Text.Json
@inject NavigationManager Nav
@inject IJSRuntime JS

<PageTitle>Justin Palmer | Cloud and Data Developer</PageTitle>

<HeadContent>
    <meta name="description" content="Cloud and data developer delivering Azure data platforms, .NET APIs, and modern web apps (Blazor, MVC, React) with Power BI analytics." />
    <link rel="canonical" href="@CanonicalUrl" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="Justin Palmer | Cloud and Data Developer" />
    <meta property="og:description" content="Azure data platforms, .NET APIs, and modern web apps with analytics that ship." />
    <meta property="og:url" content="@CanonicalUrl" />
    <meta property="og:image" content="@OgImageUrl" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Justin Palmer | Cloud and Data Developer" />
    <meta name="twitter:description" content="Azure data platforms, .NET APIs, and modern web apps with analytics that ship." />
    <meta name="twitter:image" content="@OgImageUrl" />

    <link rel="prefetch" href="/resume" as="document" />
    <link rel="prefetch" href="/visuals" as="document" />

    <script type="application/ld+json">
        @((MarkupString)JsonLdPerson)
    </script>
</HeadContent>

<div class="container-fluid">
    <section class="hero" role="region" aria-labelledby="hero-title">
        <div class="hero-grid">
            <div>
                <span class="tag">Open to cloud developer roles</span>
                <h1 id="hero-title" class="hero-title">
                    Cloud data platforms, modern apps, and analytics that ship.
                </h1>
                <p class="hero-copy">
                    I build production-ready experiences across Blazor, MVC, and React with .NET APIs and
                    Azure data services like Azure SQL Database and Synapse dedicated SQL pool. I focus on
                    secure delivery, clear data models, and Power BI insights that stakeholders can trust.
                </p>
                <ul class="list-unstyled d-grid gap-2">
                    <li>Front-end delivery: Blazor, MVC, React with clean UX and performance tuning.</li>
                    <li>Data platform depth: Azure SQL, Synapse dedicated SQL pool, ELT patterns.</li>
                    <li>API and automation: .NET APIs, Functions, CI/CD, and operational observability.</li>
                </ul>
                <div class="d-flex flex-wrap gap-2 align-items-center">
                    <a class="btn btn-primary" href="/resume">View resume</a>
                    <a class="btn btn-outline-dark" href="/platform">View platform</a>
                    <a class="btn btn-outline-dark" href="mailto:justinraypalmer@gmail.com">Email me</a>
                    <button class="btn btn-outline-dark ms-md-auto theme-toggle" @onclick="ToggleTheme">
                        Theme: @(_theme == "dark" ? "Dark" : "Light")
                    </button>
                </div>
            </div>

            <div class="hero-panel">
                <h2 class="h5 mb-3">Delivery snapshot</h2>
                <div class="hero-metrics">
                    <div class="metric">
                        <div class="metric-value">@TotalYears+ years</div>
                        <div class="metric-label">High-trust delivery and regulated data environments</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">@DevYears+ years</div>
                        <div class="metric-label">Modern .NET, data, and cloud development</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">Focused now</div>
                        <div class="metric-label">Azure data platforms, APIs, Power BI, and automation</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <h2 class="section-title">Where I add value</h2>
        <p class="section-subtitle">A focused blend of cloud data engineering, application delivery, and analytics.</p>
        <div class="row g-3">
            <div class="col-12 col-lg-4 reveal">
                <div class="tile h-100">
                    <div class="tile-title">Application delivery</div>
                    <div class="tile-text">Blazor, MVC, and React front ends backed by secure .NET APIs.</div>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="chip">Blazor</span>
                        <span class="chip">ASP.NET MVC</span>
                        <span class="chip">React</span>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-4 reveal">
                <div class="tile h-100">
                    <div class="tile-title">Cloud data platforms</div>
                    <div class="tile-text">Azure SQL Database, Synapse dedicated SQL pool, and ELT pipelines.</div>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="chip">Azure SQL</span>
                        <span class="chip">Synapse SQL pool</span>
                        <span class="chip">Data modeling</span>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-4 reveal">
                <div class="tile h-100">
                    <div class="tile-title">Analytics and automation</div>
                    <div class="tile-text">Power BI governance, API integrations, and automation workflows.</div>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="chip">Power BI</span>
                        <span class="chip">Azure Functions</span>
                        <span class="chip">CI/CD</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <h2 class="section-title">Role alignment</h2>
        <div class="row g-3">
            <div class="col-12 col-lg-6 reveal">
                <div class="card compact p-4 h-100">
                    <h3 class="h5">Cloud developer focus</h3>
                    <p>
                        Looking for cloud data developer roles where I can build data pipelines, APIs, and
                        analytics experiences for regulated domains. I bring hands-on delivery with Azure
                        data services and a practical engineering mindset.
                    </p>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="chip">Azure SQL</span>
                        <span class="chip">Synapse</span>
                        <span class="chip">.NET APIs</span>
                        <span class="chip">Power BI</span>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6 reveal">
                <div class="card compact p-4 h-100">
                    <h3 class="h5">Delivery style</h3>
                    <p>
                        Clear requirements, fast iteration, and production-safe releases. I focus on observability,
                        data integrity, and secure access patterns from day one.
                    </p>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="chip">Governance</span>
                        <span class="chip">RLS</span>
                        <span class="chip">Audit-ready</span>
                        <span class="chip">Performance</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <h2 class="section-title">Highlights</h2>
        <div class="d-flex flex-wrap gap-2">
            <span class="chip">Azure Fundamentals (AZ-900)</span>
            <span class="chip">Azure Data Fundamentals (DP-900)</span>
            <span class="chip">Azure AI Fundamentals (AI-900)</span>
            <span class="chip">Power BI RLS ownership</span>
            <span class="chip">Secure-by-default delivery</span>
            <span class="chip">Data and API observability</span>
        </div>
    </section>

    <section class="section">
        <h2 class="section-title">Toolbox</h2>
        <div class="d-flex flex-wrap gap-2">
            @foreach (var t in TechList)
            {
                <span class="chip">@t</span>
            }
        </div>
    </section>

    <section class="section">
        <div class="card p-4 reveal">
            <h3 class="h5">Let's build a cloud platform that delivers.</h3>
            <p class="mb-2">Open to cloud data developer roles focused on Azure, Power BI, and .NET APIs.</p>
            <a class="btn btn-primary" href="mailto:justinraypalmer@gmail.com">Start a conversation</a>
        </div>
    </section>

    <div class="text-muted small mt-3">
        Personal portfolio. Views and data are my own.
    </div>
</div>

@code {
    private string _theme = "light";

    private const int FedStartYear = 2009;
    private const int DevStartYear = 2017;
    private int TotalYears => Math.Max(0, DateTime.UtcNow.Year - FedStartYear);
    private int DevYears => Math.Max(0, DateTime.UtcNow.Year - DevStartYear);

    private static readonly string[] TechList = new[]
    {
        "C# / .NET", "Blazor", "ASP.NET MVC", "React", "REST APIs", "EF Core",
        "Azure SQL", "Synapse SQL pool", "Power BI", "Azure Functions", "Azure DevOps",
        "CI/CD", "Data modeling", "D3.js", "Python", "PowerShell"
    };

    private string JsonLdPerson => JsonSerializer.Serialize(new Dictionary<string, object?>
    {
        ["@context"] = "https://schema.org",
        ["@type"] = "Person",
        ["name"] = "Justin Palmer",
        ["jobTitle"] = "Cloud and Data Developer",
        ["description"] = "Cloud developer delivering Azure data platforms, .NET APIs, and modern web apps.",
        ["url"] = CanonicalUrl,
        ["image"] = OgImageUrl,
        ["knowsAbout"] = TechList
    });

    private string CanonicalUrl => ToAbsolute("/");
    private string OgImageUrl => ToAbsolute("/img/autumn-hero.png");

    private string ToAbsolute(string pathOrAbsolute)
    {
        if (string.IsNullOrWhiteSpace(pathOrAbsolute)) return Nav.BaseUri.TrimEnd('/');
        if (Uri.TryCreate(pathOrAbsolute, UriKind.Absolute, out var abs)) return abs.ToString();
        return $"{Nav.BaseUri.TrimEnd('/')}{(pathOrAbsolute.StartsWith("/") ? string.Empty : "/")}{pathOrAbsolute}";
    }

    protected override async Task OnInitializedAsync()
    {
        try { _theme = await JS.InvokeAsync<string>("site.getTheme"); }
        catch { _theme = "light"; }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                await JS.InvokeVoidAsync("site.initTheme");
                await JS.InvokeVoidAsync("site.revealOnScroll");
                await JS.InvokeVoidAsync("resume.initExportDropdowns");
            }
            catch { }
        }
    }

    private async Task ToggleTheme()
    {
        _theme = _theme == "dark" ? "light" : "dark";
        try { await JS.InvokeVoidAsync("site.setTheme", _theme); }
        catch { }
    }
}

