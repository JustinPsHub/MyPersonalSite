@inherits LayoutComponentBase
@inject IJSRuntime JS

<a class="skip-link" href="#main-content">Skip to content</a>

<header class="site-header">
    <div class="header-inner page-shell">
        <button type="button"
                class="nav-toggle-top d-lg-none"
                data-nav-toggle
                aria-controls="appSidebar"
                aria-expanded="false"
                aria-label="Open menu">
            Menu
        </button>

        @* <div class="brand-block">
            <a class="brand-title" href="/">Justin Palmer</a>
            <span class="brand-subtitle d-none d-sm-inline">Senior Data Engineer &amp; Cloud Architect</span>
        </div> *@

        <div class="header-actions">
            <ThemeToggle />
        </div>
    </div>
</header>

<div class="app-shell">
    <div class="nav-host">
        <NavMenu />
    </div>

    <main id="main-content" class="content-area" tabindex="-1">
        @Body
    </main>

    <button class="nav-overlay" data-nav-close aria-label="Close menu"></button>
</div>

<footer class="site-footer">
    <div class="page-shell d-flex flex-column flex-md-row gap-2 justify-content-between">
        <span>Enterprise data platforms · GenAI enablement · Secure governance</span>
        <span>Focused on Azure OpenAI, governed analytics, and enterprise data platforms.</span>
    </div>
</footer>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">Close</span>
</div>

@code {
    private bool _themeReady;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender || _themeReady) return;
        try
        {
            await JS.InvokeVoidAsync("site.initTheme");
            _themeReady = true;
        }
        catch { }
    }
}
